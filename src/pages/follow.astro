---
import Avatar from "../components/Avatar.astro";
import ContactInfo from "../components/ContactInfo.astro";
import PageHeader from "../components/PageHeader.astro";
import GlassContainer from "../components/GlassContainer.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import AvatarImage from "../images/brand/tstvprofile.png";
import { PERSONAL_INFO, SITE_TITLE, SOCIAL_LINKS } from "../consts";
import { Icon } from "astro-icon/components";

const email = PERSONAL_INFO.email;
const pageTitle = `Follow ${PERSONAL_INFO.name} - ${SITE_TITLE}`;
const pageDescription = `Connect with ${PERSONAL_INFO.name} (${PERSONAL_INFO.username}) across all social platforms. Follow for tech content, open source projects, developer tutorials, and more.`;
---

<BaseLayout title={pageTitle} description={pageDescription} maxWidth="md">
  <PageHeader title="TechSquidTV" subtitle="Kyle Tryon">
    <div class="mb-6 flex justify-center">
      <Avatar src={AvatarImage} alt="Kyle Tryon - TechSquidTV" size="xl" />
    </div>
    <ContactInfo email={email} className="mb-8" />
    <div class="mb-8 text-center">
      <p class="text-text-muted text-lg leading-relaxed">
        {PERSONAL_INFO.jobTitle} specializing in <strong
          >developer experience</strong
        >,
        <strong>open source</strong>, and <strong>tech education</strong>.
        Follow for tutorials, projects, and tech insights.
      </p>
    </div>
  </PageHeader>

  <div class="space-y-6">
    <!-- Social Media Section -->
    <section>
      <div class="mx-auto flex max-w-md flex-col gap-3">
        {
          SOCIAL_LINKS.map((social) => (
            <a
              href={social.url}
              target="_blank"
              rel="noopener noreferrer"
              class="bg-bg-tertiary border-border text-text-primary hover:bg-bg-code hover:border-accent hover:shadow-card group flex items-center gap-4 rounded-xl border p-4 no-underline transition-all duration-300 hover:-translate-y-1"
              style={`--brand-color: ${social.brandColor}`}
            >
              <GlassContainer variant="circle">
                <Icon
                  name={social.icon}
                  size={24}
                  class="text-text-primary group-hover:text-accent transition-colors duration-300"
                />
              </GlassContainer>
              <span class="text-text-primary group-hover:text-accent flex-1 text-center text-xl font-semibold transition-colors duration-300">
                {social.name}
              </span>
            </a>
          ))
        }
      </div>
    </section>
  </div>

  <!-- Structured Data for Link Tree -->
  <script
    type="application/ld+json"
    is:inline
    set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "ProfilePage",
      mainEntity: {
        "@type": "Person",
        name: PERSONAL_INFO.name,
        alternateName: PERSONAL_INFO.username,
        description: pageDescription,
        url: PERSONAL_INFO.website,
        email: PERSONAL_INFO.email,
        jobTitle: PERSONAL_INFO.jobTitle,
        worksFor: {
          "@type": "Organization",
          name: PERSONAL_INFO.corporateCompany,
        },
        sameAs: SOCIAL_LINKS.map((link) => link.url),
      },
    })}
  />
</BaseLayout>

<style>
  /* Perfect glass circles for icons */
  .glass-circle {
    box-shadow:
      0 4px 16px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.08);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
  }

  .glass-circle:hover {
    box-shadow:
      0 6px 24px rgba(0, 0, 0, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.12);
  }

  /* Accessibility: Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .glass-circle {
      transition: none !important;
    }
  }
</style>
